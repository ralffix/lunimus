<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lunimus Dashboard</title>
</head>
<body>
  <h1>Dashboard</h1>
  <button id="logout-btn">Logout</button>
  <div id="session-info"></div>

  <!-- 1. Load Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- 2. Load your Supabase configuration -->
  <script src="supabase.js"></script>
  <!-- 3. Initialize and use Supabase client -->
  <script>
    // Always initialize the client AFTER the SDK and config are loaded!
    const supabase = supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY);

    // Check session and display user info
    (async () => {
      const { data: { session }, error } = await supabase.auth.getSession();
      document.getElementById('session-info').innerText =
        session && session.user ? 'Logged in as: ' + session.user.email : 'Not logged in.';
    })();

    // Logout logic
    document.getElementById('logout-btn').onclick = async () => {
      await supabase.auth.signOut();
      window.location.href = 'index.html';
    };
  </script>
</body>
</html>
