<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Minecraft server</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="navbar"></div>

  <div class="mc-server-page">
    <section class="server-hero">
      <h1>ğŸ­ Lunimus Hide & Seek Server</h1>
      <p>Blend in. Disguise. Run. Hide. Seek. Outplay everyone.</p>
      <div class="server-ip">
        <strong>Server IP:</strong> play.lunimus.dev
        <button onclick="copyIP()">Copy IP</button>
      </div>
    </section>
  
    <section class="server-details">
      <h2>ğŸ® Minigame Highlights</h2>
      <ul>
        <li>ğŸ” Fast-paced Hide & Seek mode</li>
        <li>ğŸ§± Unique maps with custom hiding spots</li>
        <li>ğŸ§‘â€ğŸ¤â€ğŸ§‘ Play solo or in parties</li>
        <li>âš¡ Power-ups and seeker abilities</li>
        <li>ğŸ† Leaderboards and rewards</li>
      </ul>
    </section>
  
    <section class="server-gallery">
      <h2>ğŸ“¸ Server Gallery</h2>
      <div class="gallery-images">
        <img src="img/map1.png" alt="Map preview 1">
        <img src="img/gameplay1.png" alt="In-game action">
        <img src="img/lobby.png" alt="Lobby area">
      </div>
    </section>
  
    <section class="join-now">
      <h2>ğŸšª Ready to hide?</h2>
      <p>Join the chaos. Outsmart the seekers. Become a legend.</p>
      <button class="join-btn" onclick="copyIP()">Copy IP & Join Now</button>
    </section>
  </div>
  
  <script>
    function copyIP() {
      navigator.clipboard.writeText("play.lunimus.dev");
      alert("Copied IP to clipboard!");
    }
  </script>
  
  

  <script>
    // Initialize Supabase client
    const supabase = supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY);

    // Load navbar.html and then handle auth-based UI change
    fetch("navbar.html")
      .then(response => {
        if (!response.ok) throw new Error("Failed to load navbar");
        return response.text();
      })
      .then(html => {
        document.getElementById("navbar").innerHTML = html;

        // Wait for the DOM to update with injected navbar
        const checkAuthLinks = () => {
          const authLinks = document.getElementById("auth-links");
          if (!authLinks) {
            // Retry a few times if the element hasn't rendered yet
            setTimeout(checkAuthLinks, 100);
            return;
          }

          supabase.auth.getSession().then(({ data: { session } }) => {
            if (session && session.user) {
              authLinks.innerHTML = '<a href="akount.html">Account</a>';
            }
          });
        };

        checkAuthLinks();
      })
      .catch(error => {
        console.error("Error loading navbar or checking session:", error);
        document.getElementById("navbar").innerHTML = "<nav>Navbar failed to load.</nav>";
      });
  </script>
</body>
</html>

